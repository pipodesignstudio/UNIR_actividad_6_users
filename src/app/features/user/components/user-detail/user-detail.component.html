<div class="container my-20 max-w-7xl mx-auto">
  <div class="card p-6">
    @if(isLoading()) {
    <app-user-detail-loading-placeholder />
    } @else { @if (hasError() && !user) {
    <div
      class="w-full p-2.5 bg-red-100 rounded-md border-red-300 shadow-red-500 text-red-700"
    >
      Se ha producido un error al recuperar los datos del usuario. Por favor
      int√©ntalo de nuevo.
      <a routerLink="/" class="underline">Volver al inicio</a>
    </div>
    } @if(user) {
    <div
      class="flex flex-col gap-5transition-all ease-in-out delay-500"
      [ngClass]="{ 'opacity-100': !isLoading(), 'opacity-0': isLoading() }"
    >
      <div class="flex flex-row gap-3 items-center text-sm">
        <a
          class="text-slate-800 hover:text-blue-700 hover:underline cursor-pointer flex flex-row items-center gap-2"
          [routerLink]="['/']"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="size-4"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"
            />
          </svg>

          <span>Inicio</span></a
        >
        <span class="text-slate-400">/</span>
        <a class="cursor-not-allowed text-slate-400">
          {{ user | fullname }}
        </a>
      </div>
      <div
        class="grid grid-cols-1 md:grid-cols-2 gap-5 justify-center items-center mx-auto max-w-4xl my-20"
      >
        <div
          class="h-full md:border-r md:border-b-0 border-r-0 border-b border-slate-200"
        >
          <img
            [src]="user.image"
            loading="lazy"
            [alt]="user.username"
            class="object-cover rounded-full w-48 h-48"
          />
        </div>
        <div class="flex flex-col gap-2">
          <h2 class="text-2xl font-semibold">{{ user.first_name }}</h2>
          <h2 class="text-2xl font-semibold">{{ user.last_name }}</h2>
          <div class="flex flex-row gap-2 items-center text-slate-600">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-5"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"
              />
            </svg>
            <p>{{ user.username }}</p>
          </div>
          <div class="flex flex-row gap-2 items-center text-slate-600">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-5"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"
              />
            </svg>
            <a
              class="underline text-blue-500"
              [href]="'mailto:' + user.email"
              >{{ user.email }}</a
            >
          </div>

          <div class="inline-flex rounded-md shadow-xs mt-5" role="group">
            <button
              [routerLink]="['/']"
              type="button"
              class="px-4 py-2 text-sm font-medium text-blue-700 bg-white border border-slate-200 rounded-s-lg hover:bg-slate-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700"
            >
              Volver al listado
            </button>
            <button
              [routerLink]="['/updateuser', user._id]"
              type="button"
              class="px-4 py-2 text-sm font-medium text-blue-700 bg-white border-t border-b border-slate-200 hover:bg-slate-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700"
            >
              Actualizar
            </button>
            <button
              (click)="onUserDelete()"
              type="button"
              class="px-4 py-2 text-sm font-medium text-red-500 bg-white border border-slate-200 rounded-e-lg hover:bg-red-100 hover:text-red-700 focus:z-10 focus:ring-2 focus:ring-red-700 focus:text-red-700"
            >
              Borrar
            </button>
          </div>
        </div>
      </div>
    </div>
    } }
  </div>
</div>
